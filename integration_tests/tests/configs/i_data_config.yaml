data_sources:
  - type: "excel"
    source: "/Users/patrick/Downloads/I_DATA/i_data_edited/i_data_edited.xlsx"
    sheets:
      - sheet_name: "Cohort"
        has_headers: true
        patients_are_rows: true
        contexts:
          - identifier: "PatientId"
            data_context: subject_id
          - identifier: "YOB"
            data_context: date_of_birth
          - identifier: "Living"
            data_context: vital_status
            alias_map_config:
              mappings:
                "Yes": "ALIVE"
                "No": "DECEASED"
              output_data_type: String
          - identifier: "Age of Death (Years)"
            data_context: age_of_death
            alias_map_config:
              mappings:
                "less than 1 year": "0"
              output_data_type: Int64
          - identifier: "Sex"
            data_context: subject_sex
          - identifier: "Most Recent Visit Date"
            data_context: date_at_last_encounter
          - identifier: "Diagnosis"
            data_context: disease_label_or_id
            building_block_id: "D"
            alias_map_config:
              mappings:
                path: "/Users/patrick/Downloads/I_DATA/alias_csv_files/disease_aliases.csv"
                key_column_name: "FREE_TEXT"
                alias_column_name: "ALIAS"
              output_data_type: String
          - identifier: "Onset Age (Years)"
            data_context: onset_age
            building_block_id: "D"
            alias_map_config:
              mappings:
                "less than 1 year": "0"
              output_data_type: Int64
      - sheet_name: "Vitals"
        has_headers: true
        patients_are_rows: true
        contexts:
          - identifier: "patientid"
            data_context: subject_id
          - identifier: "Vitals Date"
            data_context: onset_date
            building_block_id: "M"
          - identifier: "Height (cm)"
            data_context:
              quantitative_measurement:
                assay_id: "LOINC:8302-2"
                unit_ontology_id: "UO:0000015"
            building_block_id: "M"
          - identifier: "Weight (kg)"
            data_context:
              quantitative_measurement:
                assay_id: "LOINC:29463-7"
                unit_ontology_id: "UO:0000009"
            building_block_id: "M"
          - identifier: "Body Mass Index"
            data_context:
              quantitative_measurement:
                assay_id: "LOINC:39156-5"
                unit_ontology_id: "UO:0000086"
            building_block_id: "M"
      - sheet_name: "Head Circ."
        has_headers: true
        patients_are_rows: true
        contexts:
          - identifier: "patientid"
            data_context: subject_id
          - identifier: "Head Circumf Date"
            data_context: onset_date
            building_block_id: "M"
          - identifier: "Head (cm)"
            data_context:
              quantitative_measurement:
                assay_id: "LOINC:9843-4"
                unit_ontology_id: "UO:0000015"
            building_block_id: "M"
      - sheet_name: "Infections"
        has_headers: true
        patients_are_rows: true
        contexts:
          - identifier: "patientid"
            data_context: subject_id
          - identifier: "Infection"
            data_context: disease_label_or_id
            alias_map_config:
              mappings:
                path: "/Users/patrick/Downloads/I_DATA/alias_csv_files/infections/infection_aliases.csv"
                key_column_name: "FREE_TEXT"
                alias_column_name: "CURIE_ID"
              output_data_type: String
      - sheet_name: "Condition"
        has_headers: true
        patients_are_rows: true
        contexts:
          - identifier: "patientid"
            data_context: subject_id
          - identifier: "Infection"
            data_context: hpo_label_or_id
            alias_map_config:
              mappings:
                path: "/Users/patrick/Downloads/I_DATA/alias_csv_files/conditions/condition_aliases.csv"
                key_column_name: "FREE_TEXT"
                alias_column_name: "CURIE_ID"
              output_data_type: String
pipeline_config:
  transform_strategies:
    - alias_map
    - default_mapping: sex_mapping
    - date_to_age
    - age_to_iso8601
  loader:
    file_system:
      output_dir: "/Users/patrick/Downloads/I_DATA/i_data_phenopackets"
      create_dir: true
  meta_data:
    created_by: Patrick Nairne
    submitted_by: Patrick Nairne
    cohort_name: "I_COHORT"
    hp_resource:
      id: "HP"
      version: "2025-09-01"
    unit_resources:
      - id: "UO"
        version: "2026-01-09"
    disease_resources:
      - id: "MONDO"
    assay_resources:
      - id: "LOINC"
        secrets:
          user: ${LOINC_USERNAME}
          password: ${LOINC_PASSWORD}