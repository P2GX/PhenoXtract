data_sources:
  - type: "excel"
    source: "/Users/patrick/Downloads/PhenoXtract/i_data.xlsx"
    contexts:
      - name: "Cohort"
        context:
          - identifier: "PatientId"
            data_context: subject_id
          - identifier: "YOB"
            data_context: date_of_birth
          - identifier: "Living"
            data_context: vital_status
            alias_map:
              hash_map:
                "Yes": "ALIVE"
                "No": "DECEASED"
              output_dtype: String
          - identifier: "Age of Death (Years)"
            data_context: age_of_death
            alias_map:
              hash_map:
                "less than 1 year": "0"
              output_dtype: Int64
          - identifier: "Sex"
            data_context: subject_sex
      - name: "Vitals"
        context:
          - identifier: "patientid"
            data_context: subject_id
          - identifier: "Vitals Date"
            data_context: onset_date
          - identifier: "Height (cm)"
            data_context:
              quantitative_measurement:
                assay_id: "LOINC:8302-2"
                unit_ontology_id: "UO:0000015"
    extraction_configs:
      - name: "Cohort"
        has_headers: true
        patients_are_rows: true
      - name: "Vitals"
        has_headers: true
        patients_are_rows: true
pipeline:
  transform_strategies:
    - date_to_age
    - alias_map
    - age_to_iso8601
    - default_mapping: sex_mapping
  loader:
    file_system:
      output_dir: "/Users/patrick/Downloads/PhenoXtract/i_data_phenopackets/"
      create_dir: true
  meta_data:
    created_by: Rouven Reuter
    submitted_by: Magnus Knut Hansen
    cohort_name: "I_COHORT"
    hp_resource:
      id: "HP"
      version: "2025-09-01"
    unit_resources:
      - id: "UO"
        version: "2026-01-09"
    assay_resources:
      - id: "LOINC"
        secrets:
          user: ${LOINC_USERNAME}
          password: ${LOINC_PASSWORD}